{{/* This partial renders the Google Analytics script.
  It only runs in production and only if the googleAnalytics ID is set in hugo.toml.
*/}}

{{- if and (not hugo.IsDevelopment) .Site.Params.googleAnalytics }}

  {{- $gaID := .Site.Params.googleAnalytics }}

  {{- /* Google tag (gtag.js) */}}
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ $gaID }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', '{{ $gaID }}');
  </script>

{{- end }}